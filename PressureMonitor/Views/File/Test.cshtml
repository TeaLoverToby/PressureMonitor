@model PressureMonitor.Models.Patient;

@{
    ViewData["Title"] = "Test";
}

<div class="text-center">
    <h1 class="display-4">Testing</h1>
    <p>Username: @Model.User.Username</p>
    
    <div class="mt-4 card">
        <h1>Upload CSV File</h1>
        @if (TempData["Error"] != null)
        {
            <div class="alert alert-dismissible alert-danger">
                @TempData["Error"]
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            </div>
        }
        @if (TempData["Success"] != null)
        {
            <div class="alert alert-success alert-dismissible">
                @TempData["Success"]
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            </div>
        }
        
        <form asp-action="UploadFile" asp-controller="File" method="post" enctype="multipart/form-data">
            @Html.AntiForgeryToken()
            <div class="form-group">
                <input type="file" name="file" class="form-control" accept=".csv" />
            </div>
            <button type="submit" class="btn btn-primary mt-2">Upload</button>
        </form>
    </div>
    
    <div class="mt-4">
        <h1>Has data for the following days:</h1>
        @if (Model.PressureMaps.Count == 0)
        {
            <p class="text-muted">No data yet</p>
        }
        else
        {
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Frame Count</th>
                    </tr>
                </thead>
                <tbody>
                @foreach (var map in Model.PressureMaps)
                {
                    <tr>
                        <td>@map.Day.ToString("yyyy-MM-dd")</td>
                        <td>@map.Frames.Count</td>
                    </tr>
                }
                </tbody>
            </table>
        }
    </div>
</div>
